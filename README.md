# CallsSip
**CallsSip** - плагин для сайта позволяющий осуществлять звонки через сервера SIP-телефонии. Плагин основан на библиотеке [SIP.js](https://sipjs.com/ "SIP.js"). Работа плагина проверена с сервером [FreeSWITCH](https://freeswitch.com// "FreeSWITCH") v1.10.2

### Подключение
Для начала сохраните папку `dist` со всем её содержимым в дирректорию Вашего проекта

Затем, перед подключением основного файла скрипта `sip.js`, Вам необходимо определить глобальную константу с настройками подключения к SIP-серверу. Ниже приведен пример:
```javascript
const __sipjs = {
	ws: "wss://sip.example.ru:7443",
	server: "sip.example.ru",
	authorizationUsername: '1000',
	authorizationPassword: 'pass',
};
```
- **ws** - полный адрес Вашего WebSocket сервера
- **server** - адрес Вашего SIP сервера
- **authorizationUsername** - логин пользователя
- **authorizationPassword** - пароль пользователя

После этого подключайте файл серипта плагина
```html
<script src="/dist/sip.js"></script>
```
Также необходмо подключить файл стилей
```html
<link rel="stylesheet" href="/dist/sip.css" />
```
При успешном подключении и регистрации пользователя в правом нижнем углу страницы появится иконка CallsSip. Зеленый цвет будет означать, что все в порядке и можно осуществлять звонки, серая - ошибка в настройках `__sipjs`, красная - ошибка подключения или регистрации пользователя на сервере

### Настройки плагина
Начиная с версии 1.0.4, плагин можно настраивать. Для настройки Вам необходимо добавить в объект `__sipjs` элемент `options`, содержащий объект настроек. Полный список настроек сожно постреть в [документации](./docs/options.md "документации")

### Исходящий звонок
Для осуществления исходящего звонка, Вы можете вызвать соответствующий метод объекта `__sipjs.sip`, передав ему в качестве параметра номер абонента
```javascript
__sipjs.sip.call('1001');
```
Вы также можете обработать событие клика по кнопке
```html
<button type="button" onclick="__sipjs.sip.call('1001');">Звонить</button>
```

[История версий](./docs/versions.md "История версий")